[default]
profile=gpu-hq
fbo-format=rgba32f
scale=ewa_lanczossharp
cscale=ewa_lanczossharp
#scale=spline36
#cscale=spline36
#interpolation
#tscale=oversample
dscale=mitchell
correct-downscaling
scaler-resizes-only
sigmoid-upscaling
linear-downscaling
scaler-lut-size=10
deband
deband-iterations=2
deband-threshold=96
deband-range=12
deband-grain=56
#video-sync=display-resample
dither-depth=auto
dither-size-fruit=7
temporal-dither
#no-fs
fs
no-border
force-window=yes
hwdec=auto-copy
#hwdec=no
sid=no
script=/usr/lib/mpv/mpris.so
replaygain=album
af-add=asoftclip
# https://gist.github.com/agyild/bbb4e58298b2f86aa24da3032a0d2ee6
glsl-shaders="~~/shaders/CAS.glsl"

# https://github.com/mpv-player/mpv/issues/9071#issuecomment-913042511
tone-mapping=reinhard
tone-mapping-desaturate=0.9
tone-mapping-desaturate-exponent=0
hdr-compute-peak=no
gamut-clipping=no

# audio="251 140 171 250 249"; video="337 315 401 313 266 138 336 308 271 264 335 303 299 248 137 334 302 298 247 136 333 244 135"; echo -n "ytdl-format="; for v in $video; do for a in $audio; do echo -n "$v+$a/"; done; done; echo "best"
# php -r '$audio=[251,140,171,250,249]; $video=[315,266,138,313,308,299,303,298,302,137,248,136,247,135,244]; echo "ytdl-format="; foreach($video as $v){foreach($audio as $a){echo "$v+$a/";}} echo "best\n";'
# lua -e 'audio={251,140,171,250,249} video={315,266,138,313,308,299,303,298,302,137,248,136,247,135,244} io.write("ytdl-format=") for x,v in ipairs(video) do for y,a in ipairs(audio) do io.write(v.."+"..a.."/") end end io.write("best\n")'

# Audio:
# 251 opus @ 160k 48kHz
# 140 m4a  @ 128k 44kHz
# 171 ogg  @ 128k 44kHz
# 250 opus @ 70k  48kHz
# 249 opus @ 50k  48kHz

# Video:
# 272 vp9   @ 4320p 60fps
# 337 vp9.2 @ 2160p 60fps HDR
# 315 vp9   @ 2160p 60fps
# 401 av01  @ 2160p 30fps
# 313 vp9   @ 2160p 30fps
# 266 avc1  @ 2160p 30fps
# 138 avc1  @ 2160p 30fps
# 336 vp9.2 @ 1440p 60fps HDR
# 308 vp9   @ 1440p 60fps
# 271 vp9   @ 1440p 30fps
# 264 avc1  @ 1440p 30fps
# 335 vp9.2 @ 1080p 60fps HDR
# 303 vp9   @ 1080p 60fps
# 299 avc1  @ 1080p 60fps
# 248 vp9   @ 1080p 30fps
# 137 avc1  @ 1080p 30fps
# 334 vp9.2 @ 720p  60fps HDR
# 302 vp9   @ 720p  60fps
# 298 avc1  @ 720p  60fps
# 247 vp9   @ 720p  30fps
# 136 avc1  @ 720p  30fps
# 333 vp9.2 @ 480p  60fps HDR
# 244 vp9   @ 480p  30fps
# 135 avc1  @ 480p  30fps

ytdl-format=337+251/337+140/337+171/337+250/337+249/315+251/315+140/315+171/315+250/315+249/401+251/401+140/401+171/401+250/401+249/313+251/313+140/313+171/313+250/313+249/266+251/266+140/266+171/266+250/266+249/138+251/138+140/138+171/138+250/138+249/336+251/336+140/336+171/336+250/336+249/308+251/308+140/308+171/308+250/308+249/271+251/271+140/271+171/271+250/271+249/264+251/264+140/264+171/264+250/264+249/335+251/335+140/335+171/335+250/335+249/303+251/303+140/303+171/303+250/303+249/299+251/299+140/299+171/299+250/299+249/248+251/248+140/248+171/248+250/248+249/137+251/137+140/137+171/137+250/137+249/334+251/334+140/334+171/334+250/334+249/302+251/302+140/302+171/302+250/302+249/298+251/298+140/298+171/298+250/298+249/247+251/247+140/247+171/247+250/247+249/136+251/136+140/136+171/136+250/136+249/333+251/333+140/333+171/333+250/333+249/244+251/244+140/244+171/244+250/244+249/135+251/135+140/135+171/135+250/135+249/best

[hrtf]
profile-desc=Add sofalizer on > 2 audio channels
# https://github.com/mpv-player/mpv/issues/8672
profile-cond=not get("core-idle", default_value) and get("audio-params/channel-count", default_value) > 2
profile-restore=copy
af-add=sofalizer=sofa=/home/kevin/.config/mpv/ClubFritz4.sofa:gain=6:interpolate=true

[MonoToStereo]
profile-desc=Expand mono audio to stereo using haas filter.
# https://github.com/mpv-player/mpv/issues/8672
profile-cond=not get("core-idle", default_value) and get("audio-params/channel-count", default_value) == 1
profile-restore=copy
af-add=haas
